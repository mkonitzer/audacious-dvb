dnl Process this file with autoconf to produce a configure script.
AC_PREREQ(2.53)
AC_INIT(README)
AC_CANONICAL_TARGET([])
AM_INIT_AUTOMAKE(xmms-dvb, 0.5.0)
AM_CONFIG_HEADER(src/config.h)
AM_DISABLE_STATIC

AC_PROG_CC
AC_PROG_CPP
AM_PROG_CC_STDC
AC_HEADER_STDC
AC_PROG_INSTALL
AM_PROG_LIBTOOL

AC_PATH_X

AM_PATH_GLIB(1.2.2,,AC_MSG_ERROR([*** GLIB >= 1.2.2 not installed - please install first ***]))
AM_PATH_XMMS(1.2.4,,AC_MSG_ERROR([*** XMMS >= 1.2.4 not installed - please install first ***]))
AM_PATH_GTK(1.2.2,,AC_MSG_ERROR([*** GTK+ >= 1.2.2 not installed - please install first ***]),gthread)


LIBS_save=$LIBS
LIBS="$LIBS $GTK_LIBS"

MATHLIB="-lm"
AC_PATH_X
AC_PATH_XTRA
if test x$have_x = xyes; then
   CFLAGS="$CFLAGS $X_CFLAGS"
else
   AC_MSG_ERROR(Unable to find X11)
fi

dnl Check for MP3Lame library
AC_MSG_CHECKING(for MP3Lame library)
have_libmp3lame=no
AC_TRY_COMPILE([
 #include <lame/lame.h>
],[
],[
have_libmp3lame=yes
])
AC_MSG_RESULT($have_libmp3lame)
if test x$have_libmp3lame = xyes; then
    CFLAGS="$CFLAGS"
else
    AC_MSG_ERROR(Unable to find MP3Lame header and library)
fi
CPPFLAGS=$CPPFLAGS_save
LIBS=$LIBS_save

AC_OUTPUT([
Makefile
src/Makefile
])
